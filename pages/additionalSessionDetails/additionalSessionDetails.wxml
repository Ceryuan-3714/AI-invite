<!-- additionalSessionDetails.wxml -->
<view class="additional-session-details-container">
  <!-- é¡µé¢åŠ è½½çŠ¶æ€ -->
  <view class="page-loading" wx:if="{{pageLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <view class="content-container" wx:else>
    <!-- é¡µé¢æ ‡é¢˜ -->
    <view class="page-header">
      <text class="page-title">åŠ åœºæ„æ„¿è¯¦æƒ…</text>
      <text class="event-title">{{eventData.title}}</text>
    </view>

    <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
    <view class="stats-overview">
      <view class="stat-card">
        <text class="stat-number">{{interestedUsers.length}}</text>
        <text class="stat-label">æœ‰æ„æ„¿</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{totalParticipants - interestedUsers.length}}</text>
        <text class="stat-label">æœªè¡¨æ€</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{totalParticipants}}</text>
        <text class="stat-label">æ€»å‚ä¸äººæ•°</text>
      </view>
    </view>

    <!-- æœ‰æ„æ„¿ç”¨æˆ·åˆ—è¡¨ -->
    <view class="interested-users-section">
      <view class="section-header">
        <text class="section-title">æœ‰åŠ åœºæ„æ„¿çš„ç”¨æˆ·</text>
        <text class="section-count">({{interestedUsers.length}}äºº)</text>
      </view>

      <view class="users-list" wx:if="{{interestedUsers.length > 0}}">
        <view class="user-item" wx:for="{{interestedUsers}}" wx:key="_id" bindtap="goToParticipantDetail" data-openid="{{item.openid}}">
          <view class="user-avatar">
            <image class="avatar-image" src="{{item.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          </view>
          <view class="user-info">
            <text class="user-name">{{item.name || 'æœªè®¾ç½®æ˜µç§°'}}</text>
            <text class="user-phone" wx:if="{{item.phone}}">{{item.phone}}</text>
            <text class="expect-time">è¡¨æ€æ—¶é—´ï¼š{{item.expectTime}}</text>
          </view>
          <view class="user-actions">
            <text class="action-icon">â†’</text>
          </view>
        </view>
      </view>

      <view class="empty-state" wx:if="{{interestedUsers.length === 0}}">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— ç”¨æˆ·è¡¨è¾¾åŠ åœºæ„æ„¿</text>
        <text class="empty-desc">å½“æœ‰ç”¨æˆ·è¡¨è¾¾åŠ åœºæ„æ„¿æ—¶ï¼Œä¼šåœ¨è¿™é‡Œæ˜¾ç¤º</text>
      </view>
    </view>

    <!-- æœªè¡¨æ€ç”¨æˆ·åˆ—è¡¨ -->
    <view class="pending-users-section">
      <view class="section-header">
        <text class="section-title">æœªè¡¨æ€ç”¨æˆ·</text>
        <text class="section-count">({{pendingUsers.length}}äºº)</text>
      </view>

      <view class="toggle-section" bindtap="togglePendingUsers">
        <text class="toggle-text">{{showPendingUsers ? 'æ”¶èµ·' : 'å±•å¼€'}}æœªè¡¨æ€ç”¨æˆ·åˆ—è¡¨</text>
        <text class="toggle-icon">{{showPendingUsers ? 'â–²' : 'â–¼'}}</text>
      </view>

      <view class="users-list" wx:if="{{showPendingUsers && pendingUsers.length > 0}}">
        <view class="user-item" wx:for="{{pendingUsers}}" wx:key="_openid" bindtap="goToParticipantDetail" data-openid="{{item._openid}}">
          <view class="user-avatar">
            <image class="avatar-image" src="{{item.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          </view>
          <view class="user-info">
            <text class="user-name">{{item.nickName || 'æœªè®¾ç½®æ˜µç§°'}}</text>
            <text class="user-phone" wx:if="{{item.phone}}">{{item.phone}}</text>
            <text class="user-status">æœªè¡¨æ€</text>
          </view>
          <view class="user-actions">
            <text class="action-icon">â†’</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>